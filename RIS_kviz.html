<!doctype html>
<html lang="sl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>XML / REST / JSON Kviz</title>

<style>
body { font-family: system-ui; background:#0f172a; color:white; margin:0; }
.wrap { max-width:900px; margin:auto; padding:30px; }
.card { background:#1e293b; padding:25px; border-radius:12px; }
button { padding:10px 18px; margin-top:15px; border-radius:8px; border:none; cursor:pointer; }
.primary { background:#3b82f6; color:white; }
.restart { background:#10b981; color:white; margin-left:10px; }
.result { background:#111827; padding:20px; border-radius:10px; margin-top:20px; }
.option { margin:6px 0; }
.correct { color:#22c55e; }
.wrong { color:#ef4444; }
hr { border:1px solid #334155; }
</style>
</head>
<body>

<div class="wrap">
<div class="card" id="quiz"></div>
</div>

<script>

/* =========================
  VSA VPRAŠANJA (skrajšano tu – obdrži tvoja obstoječa)
========================= */

const questions = window.questions || [
/* TU OSTANE TVOJ SEZNAM VPRAŠANJ BREZ SPREMEMB */
];

/* ========================= */

let current = 0;
let score = 0;
let review = [];

function render(){
const q = questions[current];
const div = document.getElementById("quiz");

div.innerHTML = `
<h2>Vprašanje ${current+1} / ${questions.length}</h2>
<p>${q.question}</p>
`;

if(q.type==="boolean"){
div.innerHTML += `
<div class="option"><input type="radio" name="ans" value="true"> DA</div>
<div class="option"><input type="radio" name="ans" value="false"> NE</div>`;
}
else{
q.options.forEach((opt,i)=>{
div.innerHTML += `
<div class="option">
<input type="checkbox" value="${i}"> ${opt}
</div>`;
});
}

div.innerHTML += `<button class="primary" onclick="next()">Naprej</button>`;
}

function next(){
const q = questions[current];
let correct = false;
let selectedAnswers = [];

if(q.type==="boolean"){
const s = document.querySelector('input[name="ans"]:checked');
if(s){
selectedAnswers = [(s.value==="true")];
if((s.value==="true") === q.answer) correct = true;
}
}
else{
const checked = [...document.querySelectorAll('input[type="checkbox"]:checked')]
.map(c=>parseInt(c.value)).sort();

selectedAnswers = checked;

const correctAns = q.answer.slice().sort();
if(JSON.stringify(checked) === JSON.stringify(correctAns)) correct = true;
}

if(correct) score++;

review.push({
question: q.question,
type: q.type,
options: q.options,
correctAnswer: q.answer,
userAnswer: selectedAnswers,
isCorrect: correct
});

current++;

if(current < questions.length) render();
else showResult();
}

function showResult(){
const div = document.getElementById("quiz");

div.innerHTML = `
<h2>Konec kviza</h2>
<p><strong>Rezultat: ${score} / ${questions.length}</strong></p>
<button class="restart" onclick="restartQuiz()">Ponovno reševanje</button>
<div class="result">
<h3>Pregled odgovorov:</h3>
`;

review.forEach(r=>{
div.innerHTML += `<p><b>${r.question}</b><br>`;

if(r.type==="boolean"){
const correctText = r.correctAnswer ? "DA" : "NE";
const userText = r.userAnswer.length ? (r.userAnswer[0] ? "DA" : "NE") : "Ni odgovora";

div.innerHTML += `
Tvoj odgovor: <span class="${r.isCorrect ? 'correct':'wrong'}">${userText}</span><br>
Pravilen odgovor: <span class="correct">${correctText}</span>
`;
}
else{
const correctTexts = r.correctAnswer.map(i=>r.options[i]);
const userTexts = r.userAnswer.map(i=>r.options[i]);

div.innerHTML += `
Tvoj odgovor: <span class="${r.isCorrect ? 'correct':'wrong'}">
${userTexts.length ? userTexts.join(", ") : "Ni odgovora"}
</span><br>
Pravilni odgovori: <span class="correct">
${correctTexts.join(", ")}
</span>
`;
}

div.innerHTML += `<hr>`;
});

div.innerHTML += `</div>`;
}

function restartQuiz(){
current = 0;
score = 0;
review = [];
render();
}

render();

</script>
</body>
</html>
